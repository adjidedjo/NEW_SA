<div class="content-heading">
  Dashboard NASIONAL FORECASTS
</div>

<div class="panel panel-default">
  <div class="panel-heading">
    Search by Month Form
  </div>
  <div class="panel-body">
    <%= form_tag(request.fullpath, {method: :get, :class => "form-inline"}) do %>
    <div class="form-group">
      <%= select_tag "areas", options_from_collection_for_select(@areas, "id", "area"), {class: "form-control"} %>
    </div>
    <div class="form-group">
      <%= select_tag "brand", options_from_collection_for_select(@brand, "name", "name"), {class: "form-control"} %>
    </div>
    <div class="form-group">
      <%= select_month(params[:date].present? ? params[:date][:month].to_i : Date.today.month, {prompt: 'Choose month'}, class: "form-control") %>
    </div>
    <div class="form-group">
      <%= select_year(Date.today, {start_year: 2017, end_year: Date.today.year, prompt: 'Choose year'}, {class: "form-control"}) %>
    </div>
    <%= submit_tag 'Search', name: nil, class: "btn btn-info" %>
    <% end %>
  </div>
</div>
<!-- START widgets box-->
<!-- END widgets box-->
<% if params[:date].present? && params[:areas].present? %>
  <div class="row">
    <div class="col-lg-12">
      <!-- START content-->
      <div class="row">
        <div class="col-lg-12">
          <div class="panel panel-info">
            <div class="panel-heading" style="text-align: center">
              forecast
            </div>
            <div class="panel-body">
              <table id="table-revenue-products" class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th style="text-align: center;">AREA</th>
                    <th style="text-align: center;">TYPE</th>
                    <th>DESCRIPTION</th>
                    <th style="text-align: center;">SIZE</th>
                    <th style="text-align: center;">FORECAST</th>
                    <th style="text-align: center;">ACTUAL</th>
                    <th style="text-align: center;">ERROR</th>
                    <th style="text-align: center;">ACCURACY</th>
                    <th style="text-align: center;">STOCK</th>
                    <th style="text-align: center;">BUFFER</th>
                  </tr>
                </thead>
                <tfoot>
                </tfoot>
                <tbody>
                  <% @acv_forecast.each do |fc| %>
                    <tr class="gradeX">
                      <td style="text-align: center;"><%= fc.area %></td>
                      <td style="text-align: center;"><%= fc.segment1 %></td>
                      <td><%= fc.segment2_name %> <%= fc.segment3_name.strip %></td>
                      <td style="text-align: center;"><%= fc.size %></td>
                      <td style="text-align: center;"><%= fc.quantity %></td>
                      <td style="text-align: center;"><%= fc.jumlah %></td>
                      <td style="text-align: center;"><%= fc.acv.nil? ? 0 : eforecast(fc.quantity, fc.jumlah) %></td>
                      <td style="text-align: center;"><%= fc.acv.nil? ? 0 : aforecast(fc.quantity, fc.jumlah) %></td>
                      <td style="text-align: center;"><%= fc.onhand %></td>
                      <td style="text-align: center;"><%= fc.qty_buf %></td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- END content-->
    </div>
  </div>
<% end %>
